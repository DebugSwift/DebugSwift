desc "Run the tests and prepare for Danger"
lane :test do

  gym(
    project:                           "Example/Example.xcodeproj",
    scheme:                            "Example",
    clean:                             true,
    output_directory:                  "temp/derived",
    output_name:                       "Example.xcresult"
  )
  
  scan(
    project:                           "Example/Example.xcodeproj",
    scheme:                            "Example",
    derived_data_path:                 "temp/derived",
    clean:                             true,
    result_bundle:                     true,
    code_coverage:                     true,
    devices:                           ['iPhone 16'],
    skip_package_dependencies_resolution: false
  )
end
